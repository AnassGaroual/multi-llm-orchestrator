name: CI

on:
  push:
    branches: [ main, 'feat/**', 'fix/**', 'chore/**' ]
  pull_request:
    branches: [ main ]

permissions:
  contents: read
  security-events: write
  checks: write
  pull-requests: write

# Cancel outdated runs on same branch
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  # noinspection YAMLSchemaValidation
  code-quality:
    name: üîç Code Quality Pipeline
    uses: ./.github/workflows/code-quality.yml
    permissions:
      contents: read
      security-events: write
      pull-requests: write
      checks: write
    secrets:
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
